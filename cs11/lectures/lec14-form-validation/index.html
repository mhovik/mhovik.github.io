<!doctype html>
<html lang="en">
		<meta charset="utf-8">
		<title>Lecture 14 - Form Validation</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="../../site/reveal/css/reveal.css">
    <link rel="stylesheet" href="../../site/reveal/css/theme/white.css" id="theme">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../site/reveal/lib/css/color-brewer.css">
    <link rel="stylesheet" href="../../site/reveal/css/154-override.css">
    <!--
    <link rel="stylesheet" href="lec20.css">
    -->

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? '../../site/reveal/css/print/pdf.css' :
      '../../site/reveal/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>


  <body>
    <div class="reveal">
      <div class="slides">
				<section>
					<h1>CSE 154</h1>
					<h3>Lecture 14: Form Submission and Validation Methods</h3>
				</section>

        <section>
          <h2>Agenda</h2>
          <p>HW3 Part A is due tonight (lock date also tonight)</p>
        </section>
        <section>
          <h2>Wrap-up APOD Example</h2>
          <p><a href="../lec13-fetch-apis/apod/apod.html">apod.html</a></p>
          <p>Any questions?</p>
        </section>

      <section>
        <h2>Review: Web Services</h2>
        <p>
          <strong>Web service</strong>: software functionality that can be invoked through the
          internet using common protocols</p>
        <p>It's like a remote function(s) you can call. Done by contacting a program on a web server</p>
        <ul>
          <li>Web services can be written in a variety of languages</li>
          <li>Many web services accept parameters and produce results</li>
          <li>Client contact the server through the browser using XML over HTTP and/or AJAX Fetch code</li>
          <li>The service's output might be HTML but could be text, XML, JSON, or other content</li>
        </ul>
      </section>

      <section>
        <h3>Some Web Services We've Used as Clients</h3>
        <p>Merriam-Webster Dictionary API</p>
        <p>NASA APOD API</p>
        <p>CSE154 web services:</p>
        <ul>
          <li>ajaxpets.php</li>
          <li>cafe.php</li>
          <li>pokedex.php and game.php</li>
          <li>recipe.php</li>
        </ul>
      </section>

      <section>
        <h2>HTTP Requests</h2>
        <p>GET, POST, PUT, DELETE</p>
        <p>By default, <code>fetch</code> makes a GET request</p>
        <p>POST is commonly used to make a request to submit some data</p>
        <p>PUT and DELETE are less common, and we won't use them in this class.</p>
      </section>

        <section>
          <h2>GET vs. POST</h2>
          <p>GET</p>
          <ul>
            <li>Requesting data from a server using filters (URL parameters)</li>
            <li>Should never be used when dealing with sensitive data</li>
            <li>Can be cached and bookmarked, remains in browser history</li>
            <li>Examples: search queries, retrieving initial page content</p>
          </ul>
          <p>POST</p>
          <ul>
            <li>Data sent in the HTTP message body, not the URL</li>
            <li>Not cached or bookmarked, no restrictions on data length</li>
            <li>Examples: Signing up, logging in, sending messages to a blog, etc.</li>
          </ul>
          <p>These POST examples are commonly used with forms!</p>
        </section>
      <section>
        <h3>Client vs. Server</h3>
          <img src="hidden/fullstackimage.png" alt="full stack analogy" class="no-border
          two-thirds-width centered-figure">
          <p class="font-16pt space-above">
            <a href="https://blog.codeanalogies.com/2018/04/07/front-end-v-back-end-explained-by-waiting-tables-at-a-restaurant/">Image source</a>
          </p>
      </section>
        <section>
          <h2>Motivating the Client-Server Relationship</h2>
          <p>
            We've used the analogy of a customer (client) ordering from a waiter at a restaurant
            (server). In this analogy, what might a customer ask for from "GET" request?
            What might a "POST" request be?
          </p>
          <img src="hidden/client-server-no-pl.png" alt="get/post image" class="space-above centered-figure" />
          <p class="font-16pt space-above">
            <a href="https://blog.codeanalogies.com/2018/04/07/front-end-v-back-end-explained-by-waiting-tables-at-a-restaurant/">Image source</a> (a wonderful reading to explain front-end vs. back-end/server relationships)</p>
        </section>

				<section>
				    <h2>Client (JS) GET Request</h2>
        <p>When no security is needed, sending query parameters using a "GET" request
          (Parameters passed visibly in the URL bar or request header) is acceptable.
        </p>
    <pre><code class="hljs">function requestMenu() {
  let url = CAFE_URL + "?menu=cafe-menu";
  //fetch by default is a GET request
  fetch(url)
    .then(checkStatus)
    .then(resp => resp.json())
    .then(handleResponse)
    .catch(handleError);
}</code></pre>
          <p class="code-caption">JS</p>
          <p><a href="code/cse154-cafe/index.html" target="_blank">Demo</a></p>
	</section>

	<section>
    <h2>Client (JS) POST Request</h2>
    <pre><code class="hljs">function adminLogin() {
  let url = CAFE_URL;

  // Create a new "FormData" object
  let params =  new FormData();
  // Add the various parameters to the FormData object
  params.append("username", "cse154");
  params.append("password", "coffee");
  // Fetch now with a method of POST and the param data in the body

  fetch(url, {method: "POST", body: params})
    .then(checkStatus)
    .then(resp => resp.json())
    .then(updateResults)
    .catch(handleError);
}</code></pre>
          <p class="code-caption">JS</p>
          <p><a href="code/cse154-cafe/admin.html" target="_blank">Demo</a></p>
	</section>

        <section>
          <h2>Posting data with Forms</h2>
          <p>There are two ways you'll commonly see forms used with POST</p>
          <ul>
            <li>Older: With method/action attributes in HTML form tag</li>
            <li>Better: With JS using validation and AJAX</li>
          </ul>
        </section>
        <section>
          <h3>Posting with method/action attributes in &lt;form&gt; tag</h3>
          <pre><code data-trim="" class="font-14pt hljs xml"><span class="hljs-tag">&lt;<span
          class="hljs-name">form id="input-form" method="post" action="submitter.php"</span>&gt;</span>
  City: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"city"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>/ &gt;</span>
  State: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"state"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span>
  ZIP: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"zip"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"submit-btn"</span>&gt;</span>Submit!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></code></pre>
          <p class="code-caption">HTML</p>
            <p>
            As soon as the submit button is clicked on <a href="examples/form-post-html.html">this page</a>,
            the data is sent to the web service
            (submitter.php) and the page is refreshed with the response (sometimes redirecting).
            </p>
            <p>This is becoming less common because we lose the asynchronous features of requests.</p>
        </section>
        <section>
          <h3>Approach 2: Posting data through JS/AJAX</h3>
          <pre><code data-trim="" class="font-14pt hljs xml"><span class="hljs-tag">&lt;<span
          class="hljs-name">form id="input-form"</span>&gt;</span>
  City: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"city"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>/ &gt;</span>
  State: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"state"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span>
  ZIP: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"zip"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"submit-btn"</span>&gt;</span>Submit!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></code></pre>
          <p class="code-caption">HTML</p>
          <div class="output" id="form-example-0">
            <pre><code class="hljs font-14pt">let url = "submitter.php";
let params = new FormData(id("input-form"));
fetch(url, { method : "POST", body : params })
  .then(checkStatus)
  .then(...)
  .catch(...)</code></pre>
<p class="code-caption">JS</p>
          </div>
          <p>Compare this new submit behavior <a href="examples/form-post-ajax.html">here</a>.</p>
          <p>What do you think are the trade-offs between the two approaches?</p>
        </section>
        <section>
          <h3>Approach 2: Requires Preventing Default Submit Behavior</h3>
          <p>
            When an input is in a form along with a button, clicking the button
            automatically verifies the input and does a POST request.
        </p>
        <p>
            If you do not want the page to refresh, you need to use 
            <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault">preventDefault</a>
            to override default form submission behavior (used in previous example).
          </p>
            <pre><code class="hljs font-14pt">function init() {
  id("input-form").addEventListener("submit", function(e) {
    // Fires when submit event happens on form
    // If we've gotten in here, all HTML5 validation checks have passed
    e.preventDefault(); // prevent default behavior of submit (page refresh)
    submitRequest(); // do more validation with JS and then fetch with FormData
  });
  // rest of code</code></pre>
<p class="code-caption">JS</p>

        </section>
        <section>
          <h3>Validation with HTML/CSS/JS</h3>
          <p>
            Many websites offer features that allow users to interact with the page and
            request/submit data to servers. Unfortunately, not all users will behave as expected.
          </p>
          <p>
            Take a look at your handout and talk with your neighbors to answer the questions
            (handout also provided <a href="lec14-activity.pdf" target="_blank">here</a>).
          </p>
        </section>

				<section>
					<h2>User Input Validation</h2>
          <p>
            <strong>User input validation</strong> is the process of ensuring that any user input is
            well-formed and correct (valid).
          </p>
          <p>
            Q: What are some examples of input validation you came up with?
          </p>
          <ul>
            <li class="fragment">Preventing blank values (e-mail address)</li>
            <li class="fragment">
              Verifying the type of values (e.g. integer, real number, currency, phone number,
              Social Security Number, postal address, email address, data, credit card number, ...)
            </li>
            <li class="fragment">
              Verifying the format and range of values (ZIP code must be a 5-digit integer)
            </li>
            <li class="fragment">
              Extra layer of confirmation (e.g. user types email twice, and the two must match)
            </li>
          </ul>
				</section>

        <section>
					<h3>A Real-World Example Form that Uses Validation</h3>
          <p>
            <img class="centered-figure" width="90%" src="hidden/expedia-form.png" alt="Validation Form Example">
          </p>
        </section>
        <section>
					<h3>Real-World Example with Validation Feedback</h3>
          <p>
            <img class="centered-figure" width="90%" src="hidden/expedia-form-feedback.png"
            alt="Validation Form Example with Error Feedback">
          </p>
        </section>

        <section>
					<h2>When To Validate Data?</h2>
          <p>
            Validation can be performed:
          </p>
          <ul>
            <li class="fragment">
              <strong>Client-side</strong> (before any user input is submitted to a server)
              <ul>
                <li>Can lead to a better user experience, allows for real-time feedback for invalid
                  input. But shouldn't be used for user verification</li>
              </ul>
            </li>
            <li class="fragment">
              <strong>Server-side</strong> (e.g. in PHP program, after user input is sent to the server)
              <ul>
                <li>Needed for truly secure validation, but slower</li>
                <li>Should not skip this step under assumption that client-side validation was
                  enough (why can't we trust all requests from a client?)</li>
              </ul>
            </li>
            <li class="fragment">
              Both:
              <ul>
                <li>Best mix of convenience and security, but requires most effort to program</li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h3>An Example: A WPL Queue Tool</h3>
          <p>
            <img class="centered-figure w-66" src="hidden/wpl.png" alt="Validation Form Example">
          </p>
        </section>

        <section>
          <h2>Importance of Validation in Web Development</h2>
          <p>
            Prioritizing validation is important as web developers so that the websites we build are:
          </p>
          <ol>
            <li>User-friendly</li>
            <li>Secure*</li>
          </ol>
          <p>If you're interested in learning more, <a
             href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/First_steps/Website_security"
             target="_blank">MDN</a>
            has a good quick introduction to web security, and <a href="https://www.owasp.org/index.php/Main_Page">OWASP</a> is a fantastic resource for
            all things related to web security. You can also find a good article on how to write
            user-friendly form UIs <a href="https://www.webfx.com/blog/web-design/best-practices-for-hints-and-validation-in-web-forms/" target="_blank">here</a>.</p>
            <p>The takeaway? There are many ways to perform validation, but MDN/OWASP both are great
                  resources to refer to based on the context of your websites</p>
            <p>Most importantly, <strong>don't trust that users will provide correct/safe
              input!</strong></p>
        </section>
<!--
        <section>
          <h2>HTML5 Input Validation</h2>
          <p>
            We've already seen some ways to use HTML5 tags to require certain types of input by
            adding attributes to your <code>&lt;input&gt;</code> tags to help with validation
          </p>
          <pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span>&gt;</span></code></pre>
          <p class="code-caption">HTML</p>
          <p>We can limit the up and down arrows with <code>min</code> (and <code>max</code> if we choose)</p>
          <p>
            </p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">min</span>=<span class="hljs-string">0</span>&gt;</span></code></pre>
            <p class="code-caption">HTML</p>
          <p></p>
          <p>
            To insist that there is a value in the input field we can add <code>required</code>
          </p>
          <pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">required</span>&gt;</span></code></pre>
          <p class="code-caption">HTML</p>
          <p>
            To prevent a user from being able to type in erroneous values, we can add a
            <em>regular expression</em> to the <code>pattern</code> attribute
          </p>
          <p>
            </p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span
            class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span
            class="hljs-string">"text"</span> <span class="hljs-attr">pattern</span>=<span
            class="hljs-string">"[A-Z][a-z]+ [A-Z][a-z]+"</span>&gt;</span></code></pre>
            <p class="code-caption">HTML</p>
          <p></p>
        </section>

        <section>
          <h3>wpl.html Form (with Validation Attributes)</h3>
          <pre><code class="hljs font-12pt">&lt;form id="input-form"&gt;
  &lt;div&gt;
    &lt;label for="name-input"&gt;Name: &lt;/label&gt;
    &lt;input id="name-input" name="student-name" type="text" pattern="[A-Z][a-z]+" required/&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="email-input"&gt;E-mail (@uw.edu): &lt;/label&gt;
    &lt;input id="email-input" name="email" type="email" required/&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="sid-input"&gt;Student Number: &lt;/label&gt;
    &lt;input id="sid-input" name="sid" type="number" min=1000000 max=1999999 /&gt;
  &lt;/div&gt;
  &lt;div id="minute-options"&gt;
    &lt;label&gt;2-Minute Question &lt;input type="radio" name="minutes" value=2 /&gt;&lt;/label&gt;
    &lt;label&gt;10-Minute Question &lt;input type="radio" name="minutes" value=10 /&gt;&lt;/label&gt;
  &lt;/div&gt;
  &lt;textarea name="question" minlength=20 rows=5 placeholder="Enter your question..."&gt;&lt;/textarea&gt;
  &lt;button id="submit-btn" type="submit"&gt;Enter Queue!&lt;/button&gt;
&lt;/form&gt;</code></pre>
          <p class="code-caption">HTML</p>
        </section>
        <section>
          <h3>Client Validation with JS</h3>
          <pre class="no-syntax-highlight"><code class="hljs font-14pt">/**
 * Just before send form data to the WPL web service.
 */
function checkInputs() {
  let email = qs("input[name='email']").value;
  let question = qs("textarea").value;
  if (!email.includes("uw.edu")) {
    handleError("Please provide a UW email");
  } else if (!question.includes(" ")) // not a real question...
    // Build the 5 parameters for our POST request
    handleError("Please provide a descriptive question");
  } else {
    // could add other checks before this
    submitWPLForm();
  }
}</code></pre>
          <p class="code-caption">wpl.js</p>
          <p>While this is a bit more work, we don't always need to send all form elements in an
          API request, and it also gives us more control over validation checks in JS (for
          properties you can't check with HTML5 attributes) before the fetch.
          </p>
        </p>
        </section>
      -->
        <section>
					<h3>Back to our Form Example</h3>
          <pre><code class="hljs">&lt;form&gt;
  &lt;label for="city-input"&gt;City: &lt;/label&gt;
  &lt;input name="city" type="text" /&gt;
  &lt;label for="state-input"&gt;State: &lt;/label&gt;
  &lt;input name="state" type="text" /&gt;
  &lt;label for="zip-input"&gt;ZIP: &lt;/label&gt;
  &lt;input name="zip" type="number" /&gt;
  &lt;button id="submit-btn"&gt;Submit!&lt;/button&gt;
&lt;/form&gt;</code></pre>
          <p class="code-caption">HTML</p>
          <div class="output" id="form-example-0">
            <form id="submission-demo">
              City: <input name="city" type="text">
              State: <input name="state" type="text">
              ZIP: <input name="zip" type="text">
              <button>Submit!</button>
            </form>
          </div>
          <p class="output-caption">output</p>
          <div class="font-20pt">
          <p>We can validate this input in a few different ways:</p>
          <ol>
            <li>Client-side: <a
               href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Form_validation">HTML5
               form elements</a> and input tag attributes</li>
            <li>Client-side: JS before sending this form data to the server (e.g. a PHP web service)</li>
            <li>Server-side: (later)!</li>
          </ol>
          </div>
        </section>
        <section>
          <h2>HTML5 Input Validation</h2>
          <p>
            We've already seen some ways to use HTML5 tags to require certain types of input by
            adding attributes to your <code>&lt;input&gt;</code> tags to help with validation
          </p>
          <pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span>&gt;</span></code></pre>
          <p class="code-caption">HTML</p>
          <p>We can limit the up and down arrows with <code>min</code> (and <code>max</code> if we choose)</p>
          <p>
            </p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">min</span>=<span class="hljs-string">0</span>&gt;</span></code></pre>
            <p class="code-caption">HTML</p>
          <p></p>
          <p>
            To insist that there is a value in the input field we can add <code>required</code>
          </p>
          <pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">required</span>&gt;</span></code></pre>
          <p class="code-caption">HTML</p>
          <p>
            To prevent a user from being able to type in erroneous values, we can add a
            <em>regular expression</em> to the <code>required</code> attribute
          </p>
          <p>
            </p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">required</span>=<span class="hljs-string">"\d+"</span>&gt;</span></code></pre>
            <p class="code-caption">HTML</p>
        </section>

        <section>
          <h3>Basic HTML5 Validation with our basic <code>form</code></h3>
          <pre><code class="hljs">&lt;form&gt;
  &lt;label for="city-input"&gt;City: &lt;/label&gt;
  &lt;input name="city" type="text" required/&gt;
  &lt;label for="state-input"&gt;State: &lt;/label&gt;
  &lt;input name="state" type="text" size="2" maxlength="2" required/&gt;
  &lt;label for="zip-input"&gt;ZIP: &lt;/label&gt;
  &lt;input name="zip" type="number" size="5" min=10000 max=99999 required/&gt;
  &lt;button id="submit-btn"&gt;Submit!&lt;/button&gt;
&lt;/form&gt;</code></pre>
          <p class="code-caption">HTML</p>
          <div class="output" id="form-example">
            <form id="submission-demov2">
              City: <input name="city" required="">
              State: <input name="state" size="2" maxlength="2" required="">
              ZIP: <input name="zip" size="5" maxlength="5" required="">
              <button>Submit!</button>
            </form>
          </div>
          <p>Forms are HTML elements that can be used to "package" user input values based on the
          name attribute, often used with POST requests. There are many neat ways to perform
          validation with the right choice of form elements!
          </p>
        </section>
        <section>
          <h3>Short Case Study: WPL Queue!</h3>
          <p>
            <img class="centered-figure w-66" src="hidden/wpl.png" alt="Validation Form Example">
          </p>
          <p>Solution code (try adding more validation methods on your own!):</p>
          <ul>
            <li><a href="code/wpl-form/wpl-solution.html" target="_blank">wpl.html</a> (running solution)</li>
            <li><a href="code/wpl-form/wpl-solution.js" target="_blank">wpl.js</a> (JS source code)</li>
          </ul>
        </section>
        <section>
          <h3>wpl.html Form (with Validation Attributes)</h3>
          <pre><code class="hljs font-12pt">&lt;form id="input-form"&gt;
  &lt;div&gt;
    &lt;label for="name-input"&gt;Name: &lt;/label&gt;
    &lt;input id="name-input" name="student-name" type="text" required/&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="email-input"&gt;E-mail (@uw.edu): &lt;/label&gt;
    &lt;input id="email-input" name="email" type="email" required/&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;label for="sid-input"&gt;Student Number: &lt;/label&gt;
    &lt;!--
      A valid student number is 7 digits; demo considering students between 2010 (min) and 2019
      (max) to demonstrate min/max
    --&gt;
    &lt;input id="sid-input" name="sid" type="number" min=1000000 max=1999999 /&gt;
  &lt;/div&gt;
  &lt;div id="minute-options"&gt;
    &lt;label&gt;2-Minute Question &lt;input type="radio" name="minutes" value=2 /&gt;&lt;/label&gt;
    &lt;label&gt;10-Minute Question &lt;input type="radio" name="minutes" value=10 /&gt;&lt;/label&gt;
  &lt;/div&gt;
  &lt;textarea name="question" minlength=20 rows=10 placeholder="Enter your question..."&gt;&lt;/textarea&gt;
  &lt;button id="submit-btn" type="submit"&gt;Enter Queue!&lt;/button&gt;
&lt;/form&gt;</code></pre>
          <p class="code-caption">HTML</p>
        </section>
        <section>
          <h3>wpl.js - Preventing Default Form Submit Behavior</h3>
          <pre><code class="hljs">/**
 * Override the default submission behavior for the form's submit event.
 */
function init() {
  id("input-form").addEventListener("submit", function(evt) {
    // if we've gotten in here, all HTML5 validation checks have passed
    evt.preventDefault();
    submitRequest();
  });
}</code></pre>
          <p class="code-caption">wpl.js</p>
        </section>
        <section>
          <h3>wpl.js - Sending Form Data with POST (with form argument)</h3>
          <pre class="no-syntax-highlight"><code class="hljs font-14pt">/**
 * Send form data to the WPL web service. Note that this function
 * is called only after all HTML5 validation constraints
 * (e.g. required attributes) have passed!
 */
function submitRequest() {
  // Solution 1: Can use form DOM element as parameter to FormData!
  let params = new FormData(id("input-form"));

  // Note that unlike GET requests, no url parameters passed in a POST request!
  fetch(URL, { method : "POST", body : params })
    .then(checkStatus) // The wpl.php will return text for this demo, no JSON
    .then(resp => resp.json())
    .then(showResponse)
    .catch(handleError);
}</code></pre>
          <p class="code-caption">wpl.js</p>
          <p>This <code>submitRequest()</code> function is called in the overriden submit behavior
          (from previous slide).</p>
        </section>
        <section class="font-16pt-slide">
          <h3>wpl.js - Sending Form Data with POST (Another Solution)</h3>
          <pre class="no-syntax-highlight"><code class="hljs font-12pt">/**
 * Send form data to the WPL web service.
 */
function submitRequest() {
  let params = new FormData();

  // Build the 4 parameters for our POST request
  params.append("sid", qs("input[name='sid']").value);
  params.append("name", qs("input[name='name']").value);
  params.append("minutes", qs("textarea").value);
  params.append("question", qs("input[name='minutes']:checked").value);

  fetch(URL, { method : "POST", body : params })
    .then(checkStatus)
    .then(resp => resp.json())
    .then(showResponse)
    .catch(handleError);
}</code></pre>
          <p class="code-caption">wpl.js</p>
          <p>We can also use the append method to append parameters one at a
          time (in this example, wpl.php only expects the 4 POST parameters)
          </p>
          <p>While this is a bit more work, we don't always need to send all form elements in an
          API request, and it also gives us more control over validation checks in JS (for
          properties you can't check with HTML5 attributes) before the fetch.
        </p>
        </section>
        <!--
        <section>
          <h3>What Kind of Form Could We Add to the Admin Page?</h3>
          <p class="fragment">The web service now accepts POST requests to add new items!</p>
          <div class="fragment">
          <p>Required POST parameters:</p>
          <ul>
            <li>name</li>
            <li>description</li>
            <li>category</li>
            <li>image</li>
          </ul>
        </div>
        </section>
      -->
			</div>
    </div>

    <script src="../../site/reveal/lib/js/head.min.js"></script>
    <script src="../../site/reveal/js/reveal.js"></script>
		<script src="validation-slides.js"></script>

    <script>
        Reveal.initialize({
          controls: true,
          progress: true,
          history: true,
          center: true,

          transition: 'slide', // none/fade/slide/convex/concave/zoom

          // More info https://github.com/hakimel/reveal.js#dependencies
          dependencies: [
            { src: '../../site/reveal/lib/js/classList.js', condition: function() { return !document.body.classList; } },
            { src: '../../site/reveal/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: '../../site/reveal/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: '../../site/reveal/plugin/highlight/highlight.pack.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
            { src: '../../site/reveal/plugin/zoom-js/zoom.js', async: true },
            { src: '../../site/reveal/plugin/notes/notes.js', async: true },
            { src: '../../site/reveal/plugin/search/search.js', async: true },
            { src: '../../site/reveal/plugin/print-pdf/printpdfbtn.js', async: true }
          ]
        });

      </script>

    </body>
  </html>
