<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Lecture 7 - JS with DOM/Events</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="../../site/reveal/css/reveal.css">
    <link rel="stylesheet" href="../../site/reveal/css/theme/white.css" id="theme">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../site/reveal/lib/css/color-brewer.css">
    <link rel="stylesheet" href="../../site/reveal/css/154-override.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? '../../site/reveal/css/print/pdf.css' :
      '../../site/reveal/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
	</head>

	<body>
		<div class="reveal">
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>CSE 154</h1>
					<h3>Lecture 7: More DOM/Events in JS</h3>
        </section>

				<section>
					<h2>Module 2 Learning Objectives</h2>
					<p>JS Basics (Strings, Numbers, Arrays, Functions, etc.)</p>
          <p>Basic HTML UI Elements (buttons, text input, select dropdowns, etc.)</p>
          <p>The DOM</p>
          <ul>
            <li>Node Acesss (getElementById, querySelector, querySelectorAll)</li>
					  <li>Tree Manipulation (appendChild, removeChild, textContent, etc.)</li>
					  <li>Style Manipulation (style vs. classList)</li>
          </ul>
          <p>Events</p>
          <ul>
            <li>Common page/user events: load, click, change, mouseover, etc</li>
            <li>DOM/event connections: <code>addEventListener</code> and
              <code>removeEventListener</code></li>
            </li>
            <li>Delayed and repeated events: <code>setTimeout</code> and
              <code>setInterval</code> (Monday)</li>
          </ul>
					<p>A deeper dive into scoping/page event flow (Monday)</p>
				</section>

        <section>
          <h2>Agenda</h2>
          <p>HW2 Part A due Thursday</p>
          <p>CP2 due Sunday</p>
          <p>HW2 Part B will be out soon and due next Thursday</p>
          <p>Review JS Basics: "Types", Booleans, and Functions</p>
          <p>Notion of Objects in JS: DOM and Events</p>
          <ul>
            <li>Accessing DOM elements</li>
            <li>Handling page events with with <code>addEventListener</code></li>
            <li>Changing styles with <code>classList</code></li>
          </ul>
        </section>

        <section>
          <h2>Review JS Basics</h2>
        </section>

        <section>
          <h2>Variables</h2>
          <p>let and const</p>
          <pre><code>
const COLORS = ["red", "green", "blue"]; // Array
let colorCount = COLORS.length;          // Number
let red = COLORS[0];                     // String
let blue = COLORS[colorCount - 1];    // COLORS[3 - 1] === COLORS[2]</code></pre>
        </section>

        <section>
          <h2>Types</h2>
          <p>List types...</p>
          <p>Numbers and Strings: ints vs. doubles, parseInt, adding, comparing, etc.</p>
          <p>== vs. ===</p>
          <p>Show equality table</p>
        </section>

        <section>
          <h2>Numbers and Strings</h2>
          <p>
          Ints and doubles are both Number type.
          Strings work very similarly to Java strings. Can use parseInt to get number value from String.
          Careful about length vs. length() though
          Also get common Math functions like Math.random() to get value from 0 to 1.
          </p>
        </section>

        <section>
          <h2>Functions</h2>
          <p>No notion of "main" in JavaScript</p>
          <p>
            Point to JSDoc
          </p>
          <p>Write JS programs with event-driven paradigm, usually starting with the window "load" event</p>
          <p>Attach functions to event listeners, breakdown those functions into smaller functions, just like you would in other languages</p>
        </section>

        <section>
          <h2>Example</h2>
          <pre><code>
function getRandomColor() {
  const COLORS = ["red", "green", "blue"];
  let randNum = Math.random() * COLORS.length; // a float in [0, 3)
  let randIndex = parseInt(randNum);           // 0, 1, or 2
  return COLORS[randIndex];
}</code></pre>
          <p class="code-caption">JS</p>
        </section>

        <!--
        <section>
          <h2>Review Mystery Box</h2>
        </section>
      -->

        <!--
        <section>
          <h2>Example</h2>
          <pre><code>
          </code></pre>
          <p class="code-caption">JS</p>
        </section>
      -->
        <section>
          <h2>Scoping and the Module Pattern</h2>
          <p>When and where are variables defined?</p>
          <p>Why is it important to keep variables local? (show example of overriding a function in mysteryBox)</p>
        </section>

        <section>
          <h2>The &quot;module pattern&quot;</h2>

          <pre><code class="hljs" data-escape data-trim>"use strict";
(function() {
  statements;
})();</code></pre>

          <p>Wraps all of your file's code in an anonymous function that is declared and immediately
          called</p>
          <p>0 global symbols will be introduced!</p>
          <p>The variables and functions defined by your code cannot be messed with externally</p>
        </section>

        <section>
          <h2>JavaScript File Skeleton</h2>

          <div class="code-example">
            <pre><code class="hljs" data-trim>/**
 * Name, section, date, etc.
 * Description of program
 */
"use strict";
(function() {

  // phew! your code goes here

})();</code></pre>
            <p class="code-caption">JS</p>
          </div>
        </section>
        <section>
          <h2>Review Mystery Box Example</h2>
          <p>On Friday, we wrote a small JavaScript program to:</p>
          <ol>
            <li>Implement a function <code>openBox</code> to change the <code>src</code> and <code>alt</code> attributes of an image</li>
            <li>Attach an "event listener" to attach a response function <code>openBox</code> to the click event</li>
            <li>Put our button event listener in an <code>init</code> function called when the window's "load" event is fired and the document is available</p>
          </ol>
        </section>

        <section>
          <h2>Thinking about Page Behavior</h2>
          <p>
            There are different types of behaviors on a page. But when you're first
            learning JavaScript, it may seem like there are a ton of different things to
            keep track of, and connecting the dots can be tricky when staring at code.
          </p>
          <p>
            But it's <em>really</em> not that complicated if you break it down before
            starting the code.
          </p>
        </section>

        <section>
          <h2>What's involved in a page event?</h2>
          <pre><code>source.addEventListener("event", response);
function response() {
  // response behavior with possible output/document elements changed
}</code></pre>
          <ol>
            <li>The <strong>source</strong> listening to the event. Most sources of an event
              will be document elements (a button, a dropdown, paragraph, etc.) but you can
              also have the window as a source to listen (always for the <code>load</code>
              event, sometimes for various key events like <code>keyPress</code>).
            </li>
            <li>The <strong>event</strong> listened to by a soure object (e.g. click, load, mouseover,
              keypress).</li>
            <li>The <strong>response</strong> for the event</li>
            <li>The <strong>output/elements changed</strong> in the
              <strong>response</strong>
          </ol>
        </section>
        <section>
          <h2>Worksheet Exercise</h2>
          <p>
            <a href="examples/lec8solution.pdf" target="_blank">Filled out tables</a>
          </p>

          <p>
            <a href="examples/events-demo.js" target="_blank">JS Implementation</a>
            (with comments!)
          </p>
        </section>
        <section>
          <h2>So how do I get started with adding interactivity to my page?</h2>
          <p>
            CP2 External Requirements
          </p>
          <ul>
            <li>Add event listener to a source element, and respond
              <ul>
                <li>What is your source?</li>
                <li>What is your event(s)?</li>
                <li>What is the response behavior?</li>
                <li>What elements change as a result?</li>
              </ul>
              <li>Add a delay or repeated interval for a function response</li>
              <li>Add/remove elements in the DOM (you can do this as part of a
                response function!</li>
            </li>
          </ul>
        </section>

        <section>
					<h2>Event Handler Binding</h2>
          <pre><code class="hljs" data-trim>window.addEventListener("load", initialize);

function initialize() {
  let msgP = document.getElementById("msgP");
  msgP.addEventListener("mouseover", showMsg);
}

function showMsg() {
  this.innerText = "You moved the mouse over me!";
  // same as document.getElementById("msgP").innerText = "You moved the mouse over me!";
}</code></pre>
          <p class="code-caption">JS (<a href="examples/events.html">example</a> from
worksheet page)</p>
          <p>Event handlers attached unobtrusively are bound to the element</p>
          <p>Inside the handler, that element becomes <code>this</code></p>
        </section>
        <section>
          <h2>Optional parameter in Event Handler Functions</h2>
          <p>
          The functions we've seen so far to respond to events like <code>click</code>
          have had the following format:
          </p>
          <pre><code class="hijs">sourceEl.addEventListener("click", responseFunction);

function responseFunction() {
  //
}</code></pre>
          <p>JavaScript gives us a really useful way to get more information about an
          event that fired the <a
                     href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#The_event_listener_callback">callback
                     function</a> by accepting an optional parameter to the
          attached function representing the event object.
          </p>
          <p>Conventionally this event object is given the name "e" or "evt"</p>
          <pre><code class="hijs">
sourceEl.addEventListener("click", responseFunction);

function responseFunction(e) {
  // each time this line is reached in response to a click, we have a new
  // event object "e" with data about the event (time, location, etc.)
}
          </code></pre>
        </section>
        <section>
          <h2>Back to JS: How an event is handled</h2>
            <pre><code class="hljs" data-trim>&lt;button id="ok"&gt;OK&lt;/button&gt;   &lt;!-- (1) --&gt;</code></pre>
            <p class="code-caption">HTML</p>

            <pre><code class="hljs" data-trim>window.addEventListener("load", initialize); // (2)

// called when page loads (from event (2))
// sets up event handlers
function initialize() {
  let ok = document.getElementById("ok");    // (3)
  ok.addEventListener("click", okayClick);
}

function okayClick() {
  alert("booyah");                           // (4)
}</code></pre>
          <p class="code-caption">JS</p>

          <div class="output">
            <button onclick="alert('booyah');">OK</button>
          </div>
        </section>

        <section>
          <h2>Check Your Understanding</h2>
          <pre class="hljs"><code>let clicks = 0;
window.addEventListener("load", main);

function main() {
  let foo = document.getElementById("foo-btn");
  let bar = document.getElementById("bar-btn");

  foo.addEventListener("click", function() {
    console.log("A button was clicked!");
    clicks++;
  });

  bar.addEventListener("click", function() {
    console.log("A button was clicked!");
    clicks++;
  });
}
</code></pre>
        <p class="code-caption">JS</p>
        <ol>
          <li>
            What are three "quality" issues you can find in this JS program?
          </li>
          <li>How many global variables/functions (symbols) are there?</li>
        </ol>
        </section>
        <section>
					<h2>Timers</h2>
          <p>Used to delay or set intervals for executing functions</p>
        </section>
        <section>
          <h2>The Notion of "Objects" in JavaScript</h2>
          <p>
            Anything you interact with on the page is an object. An object in JavaScript has:
          </p>
          <ol>
            <li>a set of properties (e.g. textContent for DOM
              objects)</li>
            <li>built-in functions (e.g. <code>addEventListener</code>). Some
            objects have different properties/functions than others.
            </li>
          </ol>
          <p>It is helpful to think of the following "types" of objects in JavaScript:</p>
          <ol>
            <li>Window and Global DOM objects</li>
            <li>Objects inside the <code>document</code> (which is a Global DOM object)</li>
            <li>Event objects (yes, events are objects!)</li>
          </ol>
        </section>

        <section>
          <h2>The window and the DOM</h2>
          <img src="../img/dom-bom.png" alt="window diagram" />
          <p class="code-caption"><a href="https://javascript.info/browser-environment">Image source</a></p>

          <p>The <code>window</code> is a global object your JavaScript programs have access to, representing the browser window.</p>
          <p>Has access to the "DOM" document tree - the "load" event is fired when the DOM tree is done loading on the page.</p>
          <p>The <code>document</code> object gives access to all page content (body, body's children, etc.)
        </section>


        <section>
          <h2>How to get DOM elements in JS</h2>
          <ol>
            <li>Ask for them by id: <code>document.getElementyById(...)</code></li>
            <li class="space-below">Query for them with CSS style selectors:
              <ul>
                <li><code>document.querySelector(...)</code></li>
                <li><code>document.querySelectorAll(...)</code></li>
              </ul>
            <li>Make new ones! <code>document.createElement(...)</code> (introduced soon)</li>
          </ol>
          <p class='fragment'>What objects might we want to get on the Mystery Box page?</p>
          <p class='fragment'>What functions would use use to get these objects?</p>
        </section>

        <section>
          <h2>Selecting Groups of DOM Objects</h2>
          <p>Methods in document and other DOM objects:</p>
          <table class="code-table">
            <tr>
              <th>Name</th>
              <th>Description</th>
            </tr>
            <tr>
              <td><a href="https://www.w3schools.com/jsref/met_document_queryselector.asp"
                  target="_blank">querySelector</a>(selector)</td>
              <td>
                returns the first element that would be matched by the given CSS selector string
              </td>
            </tr>
            <tr>
              <td><a href="https://www.w3schools.com/jsref/met_document_queryselectorall.asp"
                  target="_blank">querySelectorAll</a>(selector)</td>
              <td>
                returns an array of all elements that would be matched by the given CSS
                selector string
              </td>
            </tr>
          </table>
        </section>

        <section>
          <h2>Getting all elements of a certain type</h2>
          <p>Use <code>querySelectorAll</code> to highlight all paragraphs in the document:</p>

          <pre><code class="hljs" data-trim data-noescape>&lt;body&gt;<span class="special">
  &lt;p&gt;This is the first paragraph&lt;/p&gt;
  &lt;p&gt;This is the second paragraph&lt;/p&gt;
  &lt;p&gt;You get the idea...&lt;/p&gt;</span>
&lt;/body&gt;</code></pre>
          <p class="code-caption">HTML</p>

          <pre><code class="hljs no-highlight" data-trim>// get all DOM objects that are &lt;p&gt;
let allParas = document.querySelectorAll(&quot;p&quot;);
for (let i = 0; i &lt; allParas.length; i++) {
  allParas[i].classList.add("highlighted");
}</code></pre>
          <p class="code-caption">JS</p>


          <div class="output" id="highlight-paragraphs">
            <p>This is the first paragraph</p>
            <p>This is the second paragraph</p>
            <p>You get the idea...</p>
          </div>
          <p class="output-caption">output</p>
          <script>
let highlightDemoPs = document.querySelectorAll("#highlight-paragraphs p");
for (let i = 0; i < highlightDemoPs.length; i++) {
  highlightDemoPs[i].style.backgroundColor = "yellow";
}
          </script>
        </section>

        <section>
          <h3>Complex selectors: Taking what we know from CSS Selectors!</h3>
          <p>Let's say we want to highlight all paragraphs inside of the section with ID 'address':</p>
          <pre><code class="hljs font-14pt" data-trim data-noescape><body>&lt;p&gt;This won't be highlighted!&lt;/p&gt;
<span class="special">&lt;div id="address"&gt;
  &lt;p&gt;1234 Street&lt;/p&gt;
  &lt;p&gt;Seattle, WA&lt;/p&gt;
&lt;/div&gt;</span>
</body></code></pre>
          <p class="code-caption">HTML</p>
          <p>We can use <code>querySelectorAll</code> to return an array of all the
          elements we want. What is the CSS query we would use to select all the
          paragraphs we want? <span class="fragment">(#address p)</span></p>
          <p class="fragment">CSS Selector Mystery practice if needed: <a
             href="https://www.codestepbystep.com/problem/view/html/css/selectorMystery1">here</a>
          and <a
             href="https://www.codestepbystep.com/problem/view/html/css/selectorMystery2">here</a>
          and <a href="https://flukeout.github.io">here</a></p>
        </section>
        <section>
          <h3>Complex Selectors with <code>querySelectorAll</code></h3>
          <pre><code class="hljs font-14pt" data-trim data-noescape><body>&lt;p&gt;This won't be highlighted!&lt;/p&gt;
<span class="special">&lt;div id="address"&gt;
  &lt;p&gt;1234 Street&lt;/p&gt;
  &lt;p&gt;Seattle, WA&lt;/p&gt;
&lt;/div&gt;</span>
</body></code></pre>
          <p class="code-caption">HTML</p>
          <pre><code class="hljs no-highlight" data-trim>let addrParas = document.querySelectorAll("#address p");
for (let i = 0; i &lt; addrParas.length; i++) {
  addrParas[i].style.backgroundColor = "yellow";
}
</code></pre>
          <p class="code-caption">JS</p>

          <div class="output">
            <p>This won't be highlighted!</p>
            <div id="address">
              <p>1234 Street</p>
              <p>Seattle, WA</p>
            </div>
            <p class="output-caption">output</p>
          </div>
          <script>
let addrParas = document.querySelectorAll("#address p");
for (let i = 0; i < addrParas.length; i++) {
  addrParas[i].style.backgroundColor = "yellow";
}
          </script>
        </section>

        <section>
          <h2>Common <code>querySelectorAll</code> issues</h2>
          <p>
            Many students forget to write <code>.</code> or <code>#</code> in front of a class or
            id
          </p>
          <pre><code class="hljs" data-trim data-noescape>// get all buttons with a class of "control"
<del class="bad">let gameButtons = document.querySelectorAll("control");</del>
let gameButtons = document.querySelectorAll(".control");
</code></pre>
          <p class="code-caption space">JS</p>
          <p class="space-above-25">
            <code>querySelectorAll</code> returns an array, not just a single element; <br>
            you must loop over the results
          </p>

          <pre><code class="hljs" data-trim data-noescape>// set all buttons with a class of "control" to have red text
<del class="bad">document.querySelectorAll(".gamebutton").classList.add("hidden");</del>
let gameButtons = document.querySelectorAll(".gamebutton");
for (let i = 0; i &lt; gameButtons.length; i++) {
  gameButtons[i].classList.add("hidden");
}
</code></pre>
          <p class="code-caption">JS</p>
          <p>
            Q: Can I still select a group of elements using <code>querySelectorAll</code> even if
            my CSS file doesn't have any style rule for that same group?
            <span class="fragment">(A: Yes!)</span>
          </p>
        </section>

        <section>
          <h2>Getting the first element of a certain type</h2>
          <p>Use <code>querySelector</code> to highlight the first paragraph in the document:</p>

          <pre><code class="hljs" data-trim data-noescape>&lt;body&gt;<span class="special">
  &lt;p&gt;This is the first paragraph&lt;/p&gt;
  &lt;p&gt;This is the second paragraph&lt;/p&gt;
  &lt;p&gt;You get the idea...&lt;/p&gt;</span>
&lt;/body&gt;</code></pre>
          <p class="code-caption">HTML</p>

          <pre><code class="hljs" data-trim data-noescape>// get all DOM objects that are &lt;p&gt;
let para = document.querySelector(&quot;p&quot;);
para.classList.add("highlighted");
</code></pre>
          <p class="code-caption">JS</p>


          <div class="output" id="higlight-first-paragraph">
            <p style="background-color: yellow">This is the first paragraph</p>
            <p>This is the second paragraph</p>
            <p>You get the idea...</p>
            <p class="output-caption">output</p>
          </div>
        </section>


			</div>
		</div>
  <script src="../../site/reveal/lib/js/head.min.js"></script>
  <script src="../../site/reveal/js/reveal.js"></script>

        <section>
					<h2>Handy Shortcut Functions</h2>
					<p>
          We will use <code>document.getElementById</code> and
          <code>document.querySelectorAll</code> a LOT. It's handy to
						declare a shortcut to help us out. You may use the following in your JS
            programs (these are exceptions to the rule of having description function
            names):
					</p>
					<pre><code class="hljs" data-trim>function id(idName) {
  return document.getElementById(idName);
}

function qs(selector) { // less common, but you may find it helpful
  return document.querySelector(selector);
}

function qsa(selector) {
  return document.querySelectorAll(selector);
}</code></pre>
					<p class="code-caption">JS</p>

          					<p class="font-18pt">Example:</p>

                    <pre><code class="hijs" data-trim>&lt;button id="box-btn"&gt;Click Me!&lt;button&gt;
          </code></pre>
          				<p class="code-caption">HTML</p>
                  <pre><code class="hljs" data-trim>let button  = document.getElementById("box-btn");
let button2 = id("box-btn");               // returns the same as above.</code></pre>
          					<p class="code-caption">JS</p>

                    <p>We will start using these in examples!</p>
        </section>
          <h2>Event Handling</h2>
          <p>We can use JavaScript to attach functions to elements when an event (e.g. "click") occurs.</p>
          <p>To do so, we need to:</p>
          <ol>
            <li>Identify the source element to listen for an event</li>
            <li>Indicate the <code>event</code> to trigger a response</li>
            <li>Specify the response function(s) to call when the event is triggered.</li>
          </ol>
          <p>Once we have this information, we can use <code>addEventListener</code> to hook everything up!</p>
          <img src="../img/mystery-box-event-flow.jpg" />
        </section>
        <section>
          <h2>Event Listeners</h2>
          <p>We have two functions to manage events and response functions for elements</p>
          <p>Use <code>addEventListener</code> to attach an event listener</p>
          <p>Use <code>removeEventListener</code> to detach an event listener (must provide a named function reference that has been added for the listened event)</p>
        </section>
        <section>
          <h2><samp>addEventListener</samp></h2>
          <img src="../img/addEventListener.png" />
        </section>
        <section>
          <h2>Examples<h2>
          <pre><code>
// the listener you should have to access the document when init is called
window.addEventListener("load", init);
// keydown is a window event, no need to attach to a DOM object
window.addEventListener("keydown", logKeyData);

// DOM event listener examples
id("my-btn").addEventListener("click", sayHello);
id("my-box").addEventListener("mouseover", sayHello);
id("my-box").addEventListener("dblclick", removeBox);</code></pre>
        </section>
        <section>
          <h2><samp>addEventListener</samp></h2>
          <img src="../img/addEventListenerMultiple.png" />
        </section>
        <section>
          <h2>Removing Event Listeners</h2>
          <p>
            Just as we can add events with <code>el.addEventListener</code>, we can also remove events using <code>removeEventListener</code>.
          </p>
          <pre><code class="hljs" data-trim>el.removeEventListener(event, responseFunction);</code></pre>
          <p class="code-caption">JS (syntax)</p>
          <p>
          Note that this only works if <code>responseFunction</code> is a named
          function that has been added to the listener on <code>el</code> for the
          specified event (this is one motivation for preferring named functions over anonymous
functions to handle events).
          </p>
        </section>
        <section>
          <h2><samp>removeEventListener</samp></h2>
          <img src="../img/removeEventListener.jpg" />
        </section>
        <section>
          <h2><samp>addEventListener</samp></h2>
          <img src="../img/event-handling-full.jpg" />
        </section>

        <section>
          <h2>Events are also Objects!</h2>
          <p>
            Recall that the event handler function can be attached to objects (window, DOM
            elements, etc.)
          </p>
          <pre><code class="hijs">sourceEl.addEventListener("click", responseFunction);

function responseFunction(e) {
  // we can access the click Event object here!
}</code></pre>
          <p class="code-caption">JS</p>
          <p>
            When the event occurs, <strong>an Event object is created</strong> and passed to the
            event listener. You can "catch" this event object as an optional parameter to get
            more information about the event.
          </p>
        </section>
        <section>
        <section>
          <h2>Common Types of JavaScript Events</h2>
          <table class="code-table">
            <tr>
              <th>Name</th>
              <th>Description</th>
            </tr>
            <tr>
              <td>load</td>
              <td>Webpage has finisehd loading the document</td>
            </tr>
            <tr>
              <td>scroll</td>
              <td>User has scrolled up or down the page</td>
            <tr>
            <tr>
              <td>click</td>
              <td>A pointing device button (e.g. mouse) has been pressed and released on
                an element</td>
            </tr>
            <tr>
              <td><a href="">dblclick</a></td>
              <td>A pointing device button is clicked twice on the same element</td>
            </tr>
            <tr>
              <td><a href="">keydown</a></td>
              <td>Any key is pressed down</td>
            </tr>
            <tr>
              <td><a href="">keyup</a></td>
              <td>Any key is released</td>
            </tr>
            <tr>
              <td><a href="">mouseenter</a></td>
              <td>A pointing device is moved onto an element that has the attached listenere</td>
            </tr>
            <tr>
              <td><a href="">mouseover</a></td>
              <td>A pointing device is moved onto the element that has the listener attached
              to itself or one of its children</td>
            </tr>
            <tr>
              <td><a href="">mousemove</a></td>
              <td>A pointing device is moved over an element</td>
            </tr>
            <tr>
              <td><a href="">mousedown</a></td>
              <td>A pointing device button is pressed on an element</td>
            </tr>
            <tr>
              <td><a href="">mouseup</a></td>
              <td>A pointing device button is released over an element</td>
            </tr>
          </table>
          <p>We'll cover more later (you can find a full list <a
            href="https://developer.mozilla.org/en-US/docs/Web/Events" target="_blank">here</a>),
          but today we'll demo <code>click</code>!</p>
        </section>
        <section>
          <h3>Event Object Properties</h3>
          <p>Event objects contain properties about an event that occurred</p>
          <p>What types of properties do you think an Event object has?</p>
          <div class="side-by-side two-panel" style="align-items: start">
          <!--
          <p>JavaScript gives us a really useful way to get more information about an
          event that fired the <a
                     href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#The_event_listener_callback">callback
                     function</a> by accepting an optional parameter to the
          attached function representing the event object.
          </p>
          <p>Conventionally this event object is given the name "e" or "evt"</p>
          -->
            <div>
          <pre><code class="hijs font-12pt">addBtn.addEventListener("click", addGroup);

function clickBtn(e) {
  console.log("Button clicked!");
  console.log(e.type); // "click"
  console.log(e.currentTarget); // "#add-btn"
  console.log(e.timestamp); // timestamp the event was created (in milliseconds)
}</code></pre>
          <p class="code-caption">JS</p>
            </div>
            <img src="hidden/event-properties.png" class="fragment" alt="Event Properties" />
          </div>
        </section>
        <section>
          <h2>Removing Event Listeners</h2>
          <p>
            Just as we can add events with el.addEventListener, we can also remove events using <code>removeEventListener</code>.
          </p>
          <pre><code class="hljs" data-trim>el.removeEventListener(event, responseFunction);</code></pre>
          <p class="code-caption">JS (syntax)</p>
          <p>
          Note that this only works if <code>responseFunction</code> is a named
          function that has been added to the listener on <code>el</code> for the
          specified event (this is one motivation for preferring named functions over anonymous
functions to handle events).
          </p>
        </section>
        <section>
          <h2>Removing Event Listeners: Example</h2>
          <pre><code class="hljs">function initialize() {
  let box = document.getElementById("box");
  box.addEventListener("mouseover", mouseOverResponse);
}

function mouseOverResponse() {
  console.log("You moved the mouse over a box!");
}

function turnOffBox() {
  let box = document.getElementById("box");
  box.removeEventListener("mouseover", mouseOverResponse);
}</code></pre>
          <p class="code-caption">JS</p>
        </section>

        <section>
          <h2>Breaking Down a UI Spec</h2>
          <p class="font-18pt">
              Today, we will take what we've learned about JavaScript, events, and the DOM,
              to implement <a
           href="skittles-v1-solution/skittles.html">a game</a> for a user to guess the correct number of
              Skittles in a jar having a certain color.
            </p>
            <div class="side-by-side">
              <div width="80%">
              <img src="hidden/skittlesv1-demo.gif" width="100%" class="centered-figure" alt="Skittles demo" />
              </div>
            <div class="font-18pt">
            <p>Think about the following questions:</p>
            <ol>
              <li>What elements in this demo should be listening to different events?</li>
              <li>For each of those elements, what events are they listening to?</li>
              <li>For each of those events, what behavior do you see happen as a result?</li>
            </ol>
          </div>
            </div>
        </section>
          <section>
            <h2>Skittles V1 Specification</h2>
            <p>
              We will implement a "game" to fill a jar with Skittles. For now, we just want
              to:
            </p>
            <ol>
              <li>Switch views when Start/Reset buttons are clicked</li>
              <li>Get the number of colors in a new game (from selected radio buttons)</li>
              <li>Use this number to fill the jar with random number of Skittles and colors!</li>
              <li>Remove Skittles from the jar</li>
            </p>
            <p>
              <img class="centered-figure" width="40%" src="hidden/skittles-wrong-guess.png" alt="skittles page expected output" />
            </p>
          </section>
          <section>
            <h2>Step 1: Hiding/Showing Views</h2>
            <p>How can we hide display an HTML element?</p>
            <div class="fragment">
            <pre><code>.hidden {
  display: none;
}</code></pre>
            <p class="code-caption">CSS</p>
            </div>
            <p class="fragment">How can we add/remove CSS classes with JS?</p>
          </section>

      <section>
        <h2>Modifying the <code>classList</code></h2>
        <p>You can manipulate the DOM element's
          <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/classList" target="_blank">classList</a>
          with the following methods:
        </p>
        <table class="code-table half-width-columns">
          <tr>
            <th>Name</th>
            <th>Description</th>
          </tr>
          <tr>
            <td>add(classname)</td>
            <td>
              Adds the specified class(es) to the list of classes on this element. Any that are
              already in the classList are ignored.
            </td>
          </tr>
          <tr>
            <td>remove(classname)</td>
            <td>
              Removes the specified class(es) to the list of classes from this element. Any that are
              already not in the classList are ignored without an error
            </td>
          </tr>
          <tr>
            <td>toggle(classname)</td>
            <td>
              Removes a class that is in the list, adds a class that is not in the list.
            </td>
          </tr>
          <tr>
            <td>contains(classname)</td>
            <td>
              Returns true if the class is in the the DOM element's classList, false if not.
            </td>
          </tr>
          <tr>
            <td>replace(oldclass, newclass)</td>
            <td>
              Replaces the old class with the new class.
            </td>
          </tr>
        </table>
      </section>

      <section>
        <h2>Examples</h2>
        <p>There were examples of this used in the Skittles code, eg, when a
          skittle was created, or when the game view was changed.
        <p>

        <pre><code class="hljs" >
function gameView() {
  id("game-view").classList.remove("hidden");
  id("menu-view").classList.add("hidden");
  id("results").textContent = "";
}
...
function addSkittle() {
  let skittle = document.createElement("div");
  skittle.classList.add("skittle");
  let randomColor = getRandomColor();
  skittle.classList.add(randomColor);
  id("jar").appendChild(skittle);
}</code></pre>
          <p class="code-caption">JS</p>
      </section>

      <section>
        <h2>Why Not .style?</h2>

        <pre><code class="hljs">
// suppose we have a skittle div we want to give our "pikachuyellow" color
// which is better? why?
skittle.style.backgroundColor = "#f3d77b";

// or
skittle.classList.add("pikachuyellow");</code></pre>
          <p class="code-caption">JS</p>
      </section>

          <section>
            <h2>Step 2: How Many Colors?</h2>
            <p>How do we determine what radio button value is selected?</p>
            <p>How do we use this value when starting a game?</p>
          </section>

          <section id="radiobuttons">
            <h2>Review: <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/The_native_form_widgets#Radio_button" target="_blank">Radio
              buttons</a>: <code>&lt;input&gt;</code></h2>
            <p class="term-definition">sets of mutually exclusive choices (inline)</p>
            <pre><code class="hljs" data-trim>&lt;input type="radio" name="color-count" value="3" checked /&gt; 3
&lt;input type="radio" name="color-count" value="6"/&gt; 6
&lt;input type="radio" name="color-count" value="9"/&gt; 9</code></pre>
            <p class="code-caption">HTML</p>

            <div class="output">
        <label><input type="radio" name="color-count" value="3" checked> 3</label>
        <label><input type="radio" name="color-count" value="6"> 6</label>
        <label><input type="radio" name="color-count" value="9"> 9</label>
              <p class="output-caption">output</p>
            </div>
            <p>Grouped by name attribute (only one can be checked at a time)</p>
            <p>Must specify a value for each one or else it will be sent as value on</p>
          </section>
        <section>
					<h2>Useful Selectors for Form/UI Elements</h2>
          <div class="side-by-side two-panel">
            <div>
          <pre><code class="hljs" data-trim>element[attribute="value"] {
  property: value;
  ...
}</code></pre>
          <p class="code-caption">CSS (template)</p>
          </div>

            <div>
          <pre><code class="hljs">input[name='color-count'] {
  opacity: 0.5;
}
          </code></pre>
          <p class="code-caption">CSS (example)</p>
            </div>
            </div>

          <div class="output">
        <label><input style="opacity: 0.5;" type="radio" name="color-count" value="3" checked> 3</label>
        <label><input style="opacity: 0.5;" type="radio" name="color-count" value="6"> 6</label>
        <label><input style="opacity: 0.5;" type="radio" name="color-count" value="9"> 9</label>
            <p class="output-caption">output</p>
          </div>
          <p>Attribute selector: matches only elements that have a particular attribute value</p>
          <p>Useful for controls because many share the same element (input)</p>
          <p>Can also use these selectors in JS with <code>document.querySelector</code>!</p>
        </section>
        <section>
          <h2>Using Attribute Selectors to get a Selected Radio Button</h2>
          <pre><code class="hljs" data-trim>let checkedBtn = qs("input[name='color-count']:checked");
let colorCount = checkedBtn.value;
</code></pre>
          <p class="code-caption">JS (example)</p>
        </section>

		</div>

  <script src="../../site/reveal/lib/js/head.min.js"></script>

  <script src="../../site/reveal/js/reveal.js"></script>
  <script src="lec08.js"></script>

  <script>
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      transition: 'slide', // none/fade/slide/convex/concave/zoom

      // More info https://github.com/hakimel/reveal.js#dependencies
      dependencies: [{
          src: '../../site/reveal/lib/js/classList.js',
          condition: function() {
            return !document.body.classList;
          }
        },
        {
          src: '../../site/reveal/plugin/markdown/marked.js',
          condition: function() {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: '../../site/reveal/plugin/markdown/markdown.js',
          condition: function() {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: '../../site/reveal/plugin/highlight/highlight.pack.js',
          async: true,
          callback: function() {
            hljs.initHighlightingOnLoad();
          }
        },
        { src: '../../site/reveal/plugin/zoom-js/zoom.js', async: true },
        { src: '../../site/reveal/plugin/notes/notes.js', async: true },
        { src: '../../site/reveal/plugin/search/search.js', async: true },
        { src: '../../site/reveal/plugin/print-pdf/printpdfbtn.js', async: true }
      ]
    });
  </script>
</body>
</html>
