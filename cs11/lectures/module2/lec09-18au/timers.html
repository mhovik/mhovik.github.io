<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Timers</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="../../site/reveal/css/reveal.css">
    <link rel="stylesheet" href="../../site/reveal/css/theme/white.css" id="theme">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../site/reveal/lib/css/color-brewer.css">
    <link rel="stylesheet" href="../../site/reveal/css/154-override.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? '../../site/reveal/css/print/pdf.css' :
      '../../site/reveal/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>
	<body>
		<div class="reveal">
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

        <section>
					<h2>Timers</h2>
          <p>Used to delay or set intervals for executing functions</p>
        </section>

        <section>
					<h2>Setting a Timer</h2>
          <table class="code-table">
            <tr>
              <th>method</th>
              <th>description</th>
            </tr>
            <tr>
              <td>setTimeout(function, delayMS)</td>
              <td>arranges to call given function after given delay in ms</td>
            </tr>
            <tr>
              <td>setInterval(function, delayMS)</td>
              <td>arranges to call function repeatedly every delayMS ms</td>
            </tr>
            <tr>
              <td>
                clearTimeout(timerID)
                <br />
                clearInterval(timerID)
              </td>
              <td>stops the given timer</td>
            </tr>
          </table>
          <p>
            Both <code>setTimeout</code> and <code>setInterval</code> return an ID
            representing the timer
          </p>
          <ul>
            <li>This ID can be passed to <code>clearTimeout</code>/<code>Interval</code> later to
              stop the timer</li>
          </ul>
        </section>

        <section>
          <h2><code>setTimeout</code> Example</h2>
          <pre><code class="hljs" data-trim>&lt;button id="demo-btn">Click me!&lt;/button>
&lt;span id="output-text">&lt;/span>
</code></pre>
          <p class="code-caption">HTML</p>

          <pre><code class="hljs" data-trim>window.addEventListener("load", function() {
  document.getElementById("demo-btn").onclick = delayedMessage;
});

function delayedMessage() {
  document.getElementById("output-text").innerText = "Wait for it...";
  setTimeout(sayBooyah, 5000);
}

function sayBooyah() { // called when the timer goes off
  document.getElementById("output-text").innerText = "BOOYAH!";
}</code></pre>
          <p class="code-caption">JS</p>

          <div class="output">
            <button id="demo-btn">Click me!</button>
            <span id="output-text"></span>
            <p class="output-caption">output</p>
          <div>
        </section>


       <section>
          <h2><code>setInterval</code> Example</h2>
          <pre><code class="hljs" data-trim>let timer = null; // stores ID of interval timer
function delayMsg2() { 
    timer = setInterval(sayHello, 1000);
}

function sayHello() {
  document.getElementById("outputText").innerHTML += "Hello!"
}</code></pre>
          <p class="code-caption">JS</p>
          <div class="output">
            <button id="clickme2">Click me!</button>
            <span id="outputText2"></span>
            <p class="output-caption">output</p>
          <div>
        </section>

        <section>
          <h2><code>clearInterval</code> Example</h2>
          <pre><code class="hljs" data-trim>let timer = null; // stores ID of interval timer
function toggleDelayMessage() {
  if (timer === null) {
    timer = setInterval(sayHello, 1000);
  } else {
    clearInterval(timer);
    timer = null;
  }
}

function sayHello() {
  document.getElementById("output-text").innerText += "Hello!"
}</code></pre>
          <p class="code-caption">JS</p>
          <div class="output">
            <button id="demo-btn2">Click me!</button>
            <span id="output-text2"></span>
            <p class="output-caption">output</p>
          <div>
        </section>

        <section>
					<h2>Passing Parameters to Timers</h2>
          <pre><code class="hljs" data-trim>function delayedMultiply() {
  // 6 and 7 are passed to multiply when timer goes off
  setTimeout(multiply, 2000, 6, 7);
}

function multiply(a, b) {
  alert(a * b);
}</code></pre>
          <p class="code-caption">JS</p>

          <div class="output">
            <button id="clickme3" onclick="delayedMultiply();">Click me!</button>
          </div>
          <p>Any parameters after the delay are eventually passed to the timer function</p>
          <ul>
            <li>Doesn't work in IE; must create an intermediate function to pass the parameters</li>
          </ul>
          <p>Why not just write this?</p>
          <pre><code class="hljs" data-trim>
          setTimeout(multiply(6 * 7), 2000);
          </code></pre>
          <p class="code-caption">JS</p>
        </section>
        <section>
          <h2>Summary</h2> 
          <p>
          When you want to call a function after a specified delay in time, use
          <code>setTimeout</code>. 
          appears on a page.
          </p>
          <p>
            When you want to call a function <em>repeatedly</em> every X seconds, use
            <code>setInterval</code>. 
          </p>
          <p>
            For both types of timers, you'll need a variable with the timer id (returned
            by both functions) to pass to <code>clearTimeout</code>/<code>clearInterval</code> when
            you want to stop the delay/interval.
          </p>
        </section>
        <section>
          <h2>Full Example</h2>
          <p>
            <a href="../../examples/js/timers/timers-example.html" target="_blank">Example</a> demonstrating 
            how to set delays and intervals with timers.
          </p>
        </section>

        <section>
					<h2>Common Timer Errors</h2>
          <p>Many students mistakenly write <code>()</code> when passing the function</p>
          <pre><code class="hljs" data-trim data-noescape>
          <del class="bad">setTimeout(booyah(), 2000);</del>
          setTimeout(booyah, 2000);

          <del class="bad">setTimeout(multiply(num1 * num2), 2000);</del>
          setTimeout(multiply, 2000, num1, num2);
          </code></pre>
          <p class="code-caption">JS</p>

          <p>What does it actually do if you have the <code>()</code>?</p>
          <ul class="answer-list">
            <li class="answer">It calls the function immediately, rather than waiting the 2000ms!</li>
          </ul>
        </section>
			</div>
		</div>
  <script src="../../site/reveal/lib/js/head.min.js"></script>
  <script src="../../site/reveal/js/reveal.js"></script>
  <script src="lec09.js"></script>

  <script>
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      transition: 'slide', // none/fade/slide/convex/concave/zoom

      // More info https://github.com/hakimel/reveal.js#dependencies
      dependencies: [{
          src: '../../site/reveal/lib/js/classList.js',
          condition: function() {
            return !document.body.classList;
          }
        },
        {
          src: '../../site/reveal/plugin/markdown/marked.js',
          condition: function() {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: '../../site/reveal/plugin/markdown/markdown.js',
          condition: function() {
            return !!document.querySelector('[data-markdown]');
          }
        },
        {
          src: '../../site/reveal/plugin/highlight/highlight.pack.js',
          async: true,
          callback: function() {
            hljs.initHighlightingOnLoad();
          }
        },
        { src: '../../site/reveal/plugin/zoom-js/zoom.js', async: true },
        { src: '../../site/reveal/plugin/notes/notes.js', async: true },
        { src: '../../site/reveal/plugin/search/search.js', async: true },
        { src: '../../site/reveal/plugin/print-pdf/printpdfbtn.js', async: true }
      ]
    });
  </script>
</body>
</html>

